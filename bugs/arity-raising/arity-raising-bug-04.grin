{-
  run:
    stack exec -- grin -p -t --print-hpt-result --ar -p arity-raising-bug-04.grin
-}

-----------------------------------------------
-- test source code
-----------------------------------------------


sub p1 p2 =
  (CGrInt n1) <- fetch p1
  (CGrInt n2) <- fetch p2
  n3 <- _prim_int_sub n1 n2
  pure (CGrInt n3)

grinMain =
  p3 <- store (CGrInt 10)
  p4 <- store (CGrInt 1)
  v2 <- sub p3 p4
  p5 <- store v2
  sub p3 p5

-----------------------------------------------
-- NOTES
-----------------------------------------------
{-
  wrong result:
    arity raising crashes:
    grin: src/Transformations/Optimising/ArityRaising.hs:(96,24)-(99,49): Non-exhaustive patterns in case
-}

